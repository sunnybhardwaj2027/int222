React runs in the Browser(Client Side). Express runs on the Server(Server side). they are usually on different "origins" (eg: React on localhost:5173 and express on localhost:3000)

To connect them, we need to bridge a security gap called CORS and then use 'fetch' to send data.

here is part 5.5 => connecting React to express

1. the Backend adjustment (CORS)

=> Browsers have a security feature that blocks a website on port 5173(React) from asking for data from port 3000(Express). This is to prevent malicious sites from reading your internal servers.

To allow your React app to talk to your backend, you must explicitly allow it in express using 'cors' middleware.

in your backend terminal => npm install cors

update server.js
const cors = require(cors); <---1. import cors

app.use(cors()); <--- 2. Enable it! Now react can talk to us

2. The React component => in you React Project, you don't talk to the database directly. You talk to the API endpoints we created ( /api/users ).

here is 'SignUpForm' component that sends data to your express server.

code:- SignUpForm.jsx

import { useState } from 'react'

const SignUpForm = () => {

    const [formData, setFormData] = useState({
        username: '',
        email: ''
    });

    const handleSubmit = async (e) => {
        e.preventDefault();

        try {
            // THE CONNECTION HAPPENS HERE
            const response = await fetch('http://localhost:3000/api/users', {
                method: 'POST', // we are creating data
                headers: {
                    'Content-Type' : 'application/json', // Tell express we are sending JSON
                }, 
                body: JSON.stringify(formData), // Convert js object to string
            });

            const data = await response.json();

            if(response.ok) {
                alert("Success! User Created: " + data.user.username);
                console.log("Server Response:", data);

                setFormData( {username: '', email: ''} );
            } else {
                alert("Error: " + data.message);
            }
        } catch(error) {
            console.log("Network Error:", error);
        }
    }

  return (
    <form onSubmit={handleSubmit} style={{ padding: '20px' }}>
        <h2>Create User</h2>
        <input
            type='text'
            placeholder='Username'
            value={formData.username}
            onChange={(e) => setFormData({...formData, username: e.target.value})}
        />
        
        <br /><br />

        <input
            type='email'
            placeholder='Email'
            value={formData.email}
            onChange={(e) => setFormData({...formData, email: e.target.value})}
        />

        <br /><br />

        <button type='submit'>Sign Up</button>
    </form>
  )
}

export default SignUpForm

--- code ended here ---

3. The full lifecycle (What actually happens)

    1. React: User types "JohnDoe" and hits Submit.
    2. React: 'fetch' takes the object { username: "JohnDoe" } , turn it into a JSON String, and shoots it to 'localhost:3000/api/users.
    3. Express: Receives the Request. express.json() reads the string and turns it back into a javascript object.
    4. Mongoose: Takes that object, validates it against the Schema (checking if email is unique, etc..) and saves it to MongoDB
    5. Express: sends back a 201 Created status with the new user data
    6. React: Receives the 201, parse the JSON, and shows the success alert

what's next ?
=> Now that you have the frontend and backend talking, your server.js is going to get very crowded very fast if we add Login, Posts, Likes and Comments.

=> we need to organize our backend so it scales.

=> Ready for part 6 => the MVC structure(Model, view, controllers)